!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__input-error_active"},r=(e,t,r)=>{o(e)?n(t):(t.disabled=!1,t.classList.remove(r.inactiveButtonClass))},n=e=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},o=e=>e.some((e=>!e.validity.valid));var a=e+"5c2584faa41177b41691.svg",s=e+"d73f076c46eb5467f5fc.svg",c=e+"40608da7369d39bc1077.svg",i=e+"d3610e9c6dce3cb370d8.svg";document.getElementById("image-pencil").src=a,document.getElementById("white-image-pencil").src=s,document.getElementById("image-plus").src=c,document.getElementById("image-logo").src=i;const d=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}_request(e,t){return fetch(e,t).then(this._checkResponse)}editUserInfo(e){let{name:t,about:r}=e;return this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})})}getUserInfo(){return this._request(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers})}editProfileAvatar(e){return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}postCard(e){let{caption:t,link:r}=e;return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})})}removeCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers,body:JSON.stringify({cardId:e})})}addLike(e){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers,body:JSON.stringify({cardId:e})})}removeLike(e){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers,body:JSON.stringify({cardId:e})})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"d36a440a-9446-403c-9bd0-1c72d07d3c16","Content-Type":"application/json"}}),l=document.querySelector(".profile__name"),u=document.querySelector(".profile__description"),m=document.querySelector("#profile-edit-modal"),_=document.querySelector(".profile__edit-btn"),h=document.querySelector(".modal__submit-btn--edit-profile"),v=document.forms["edit-profile-form"],y=v.querySelector("#name"),f=v.querySelector("#description"),p=document.querySelector(".profile__edit-avatar-btn"),b=document.querySelector("#profile-edit-avatar-modal"),S=document.forms["edit-avatar-form"],q=S.querySelector("#image-link"),k=document.querySelector(".profile__avatar"),C=S.querySelector(".modal__submit-btn--edit-avatar-profile"),g=document.querySelector("#new-post-modal"),E=document.querySelector(".profile__add-btn"),L=document.querySelector(".modal__submit-btn--new-post"),x=document.forms["new-post-form"],U=x.querySelector("#image-link"),$=x.querySelector("#post-caption"),I=document.querySelector("#delete-card-modal"),w=document.querySelector(".modal__card-delete-btn"),A=document.querySelector(".modal__card-delete-cancel-btn"),B=document.querySelector("#preview-modal"),T=B.querySelector(".modal__image--preview"),N=B.querySelector(".modal__caption--preview"),O=document.querySelector(".cards__list");let P,D;function J(e){const t=document.querySelector("#card__template").content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__title"),n=t.querySelector(".card__image"),o=t.querySelector(".card__like-btn"),a=t.querySelector(".card__delete-btn");return r.textContent=e.name,n.src=e.link,n.alt=e.name,e.isLiked&&o.classList.add("card__like-btn_liked"),n.addEventListener("click",(()=>{T.src=e.link,T.alt=e.name,N.textContent=e.name,j(B)})),o.addEventListener("click",(()=>{!function(e,t){D=t._id,e.classList.contains("card__like-btn_liked")?d.removeLike(D).then(e.classList.toggle("card__like-btn_liked")).catch((e=>console.error(e))):d.addLike(D).then(e.classList.toggle("card__like-btn_liked")).catch((e=>console.error(e)))}(o,e)})),a.addEventListener("click",(()=>{!function(e,t){P=e,D=t._id,j(I)}(t,e)})),t}function j(e){e.classList.add("modal_opened"),document.addEventListener("keydown",G)}function R(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",G)}function G(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&R(e)}}d.getUserInfo().then((e=>{l.textContent=e.name,u.textContent=e.about,k.src=e.avatar})).catch((e=>{console.error(e)})),d.getInitialCards().then((e=>e.map((e=>e)))).then((e=>{e.forEach((e=>{const t=J(e);O.append(t)}))})).catch(console.error),_.addEventListener("click",(()=>{j(m),y.value=l.textContent,f.value=u.textContent})),E.addEventListener("click",(()=>{j(g)})),p.addEventListener("click",(()=>j(b))),w.addEventListener("click",(function(){const e=w.textContent;w.textContent="Deleting...",d.removeCard(D).then((()=>{P.remove(),R(I)})).catch((e=>console.error(e))).finally((()=>{w.textContent=e}))})),A.addEventListener("click",(()=>R(I))),document.querySelectorAll(".modal__close-btn").forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>R(t)))})),v.addEventListener("submit",(function(e){e.preventDefault();const t=h.textContent;h.textContent="Saving...",d.editUserInfo({name:y.value,about:f.value}).then((e=>{l.textContent=e.name,u.textContent=e.about,R(m),n(h)})).catch((e=>console.error(e))).finally((()=>{h.textContent=t}))})),x.addEventListener("submit",(function(e){e.preventDefault();const t=L.textContent;L.textContent="Saving...",d.postCard({caption:$.value,link:U.value}).then((e=>{const t=J(e);O.prepend(t),$.value="",U.value="",R(g),n(L)})).catch((e=>console.error(e))).finally((()=>{L.textContent=t}))})),S.addEventListener("submit",(function(e){console.log("Submit"),e.preventDefault();const t=q.value,r=C.textContent;C.textContent="Saving...",d.editProfileAvatar(t).then((e=>{k.src=e.avatar,R(b)})).catch((e=>console.error(e))).finally((()=>{C.textContent=r}))})),document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("click",(t=>{t.target===e&&R(e)}))})),(e=>{Array.from(document.querySelectorAll(e.formSelector)).forEach((t=>{((e,t)=>{const n=Array.from(e.querySelectorAll(t.inputSelector)),o=e.querySelector(t.submitButtonSelector);r(n,o,t),n.forEach((a=>{a.addEventListener("input",(function(){((e,t,r)=>{t.validity.valid?((e,t,r)=>{const n=e.querySelector(`.${t.id}-error`);t.classList.remove(r.inputErrorClass),n.classList.remove(r.errorClass),n.textContent=""})(e,t,r):((e,t,r,n)=>{const o=e.querySelector(`.${t.id}-error`);t.classList.add(n.inputErrorClass),o.textContent=r,o.classList.add(n.errorClass)})(e,t,t.validationMessage,r)})(e,a,t),r(n,o,t)}))}))})(t,e)}))})(t)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSxFQVV6QjhDLENBQWVILEVBQWFySSxFQUFhakIsR0F0QjFCNEosRUFBQ04sRUFBYXJJLEVBQWM0SSxFQUFjN0osS0FDN0QsTUFBTTBKLEVBQWVKLEVBQVlsRixjQUFjLElBQUluRCxFQUFhMEksWUFDaEUxSSxFQUFhSixVQUFVRSxJQUFJZixFQUFTSyxpQkFDcENxSixFQUFhL0MsWUFBY2tELEVBQzNCSCxFQUFhN0ksVUFBVUUsSUFBSWYsRUFBU00sV0FBVyxFQWMzQ3NKLENBQWVOLEVBQWNySSxFQUFjQSxFQUFhNkksa0JBQW1COUosRUFLL0UsRUFVSXdKLENBQW1CRixFQUFhckksRUFBYWpCLEdBQzdDTyxFQUFrQkMsRUFBV0MsRUFBY1QsRUFDL0MsR0FBRSxHQUNGLEVBT0F1SixDQUFrQkQsRUFBWXRKLEVBQVMsR0FDdkMsRUVnUEorSixDQUFpQi9KLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9zY3JpcHRzL3ZhbGlkYXRpb24uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy91dGlscy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgcmVxdWlyZSBzY29wZVxudmFyIF9fd2VicGFja19yZXF1aXJlX18gPSB7fTtcblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjsiLCJjb25zdCBzZXR0aW5ncyA9IHtcbiAgICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zdWJtaXQtYnRuXCIsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ0bl9pbmFjdGl2ZVwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICAgIGVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZVwiXG4gIH1cblxuXG5cbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCxzZXR0aW5ncykgPT4ge1xuICAgICAgICBpZihoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSl7XG4gICAgICAgICAgIGRpc2FibGVCdXR0b24oYnV0dG9uRWxlbWVudCk7XG4gICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIH1cbiB9O1xuXG4gY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbGVtZW50KSA9PiB7XG4gIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gfTtcblxuIGNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH07XG5cbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgc2V0dGluZ3MpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2V0dGluZ3MuZXJyb3JDbGFzcyk7XG4gICBcbiAgfTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgc2V0dGluZ3MpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShzZXR0aW5ncy5lcnJvckNsYXNzKTtcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9O1xuXG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LHNldHRpbmdzKSA9PiB7XG4gICAgaWYoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgIGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLCBzZXR0aW5ncyk7XG5cbiAgICB9XG4gICAgZWxzZXtcbiAgICAgICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCxzZXR0aW5ncyk7XG4gICAgfVxufTtcblxuXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWxlbWVudCxzZXR0aW5ncykgPT57XG4gIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChzZXR0aW5ncy5pbnB1dFNlbGVjdG9yKSk7XG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBzZXR0aW5ncyk7XG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uKCl7XG4gICAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LHNldHRpbmdzKTtcbiAgICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LHNldHRpbmdzKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5cbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoc2V0dGluZ3MpID0+IHtcbiAgY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2V0dGluZ3MuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PntcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCxzZXR0aW5ncyk7XG4gIH0pO1xufTtcblxuXG5jb25zdCByZXNldEZvcm1WYWxpZGF0aW9uID0gKGZvcm1FbGVtZW50LHNldHRpbmdzKSA9PiB7XG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHNldHRpbmdzLmlucHV0U2VsZWN0b3IpKTtcbiAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIFxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGhpZGVJbnB1dEVycm9yKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIHNldHRpbmdzKTtcbiAgICB9KTtcbiAgXG4gICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBzZXR0aW5ncyk7XG4gIH07XG5cbiAgZXhwb3J0IHsgZW5hYmxlVmFsaWRhdGlvbiwgc2V0dGluZ3MsIHJlc2V0Rm9ybVZhbGlkYXRpb24sIGRpc2FibGVCdXR0b24gfTsgXG4iLCIvLyB1dGlscy9BcGkuanNcblxuY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgfVxuXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBfcmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBhYm91dCxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgZWRpdFByb2ZpbGVBdmF0YXIoYXZhdGFyKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IGF2YXRhcixcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHBvc3RDYXJkKHsgY2FwdGlvbiwgbGluayB9KSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogY2FwdGlvbixcbiAgICAgICAgbGluazogbGluayxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBjYXJkSWQ6IGNhcmRJZCxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgYWRkTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBjYXJkSWQ6IGNhcmRJZCxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBjYXJkSWQ6IGNhcmRJZCxcbiAgICAgIH0pLFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwaTtcbiIsIi8vID09PSBTdHlsZXMgYW5kIFZhbGlkYXRpb24gPT09XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHtcbiAgZW5hYmxlVmFsaWRhdGlvbixcbiAgc2V0dGluZ3MsXG4gIHJlc2V0Rm9ybVZhbGlkYXRpb24sXG4gIGRpc2FibGVCdXR0b24sXG59IGZyb20gXCIuLi9zY3JpcHRzL3ZhbGlkYXRpb24uanNcIjtcblxuLy8gPT09IEFQSSBhbmQgQ29uc3RhbnRzID09PVxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vdXRpbHMvQXBpLmpzXCI7XG5cbi8vID09PSBJbWFnZSBJbXBvcnRzIGFuZCBBc3NpZ25tZW50cyA9PT1cbmltcG9ydCBwZW5jaWxTcmMgZnJvbSBcIi4uL2ltYWdlcy9wZW5jaWwuc3ZnXCI7XG5jb25zdCBwZW5jaWxJbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW1hZ2UtcGVuY2lsXCIpO1xucGVuY2lsSW1hZ2Uuc3JjID0gcGVuY2lsU3JjO1xuXG5pbXBvcnQgd2hpdGVQZW5jaWxTcmMgZnJvbSBcIi4uL2ltYWdlcy93aGl0ZS1wZW5jaWwuc3ZnXCI7XG5jb25zdCB3aGl0ZVBlbmNpbEltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3aGl0ZS1pbWFnZS1wZW5jaWxcIik7XG53aGl0ZVBlbmNpbEltYWdlLnNyYyA9IHdoaXRlUGVuY2lsU3JjO1xuXG5pbXBvcnQgcGx1c1NyYyBmcm9tIFwiLi4vaW1hZ2VzL3BsdXMuc3ZnXCI7XG5jb25zdCBwbHVzaW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImltYWdlLXBsdXNcIik7XG5wbHVzaW1hZ2Uuc3JjID0gcGx1c1NyYztcblxuaW1wb3J0IGxvZ29TcmMgZnJvbSBcIi4uL2ltYWdlcy9sb2dvLnN2Z1wiO1xuY29uc3QgbG9nb0ltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWFnZS1sb2dvXCIpO1xubG9nb0ltYWdlLnNyYyA9IGxvZ29TcmM7XG5cbi8vID09PSBBUEkgU2V0dXAgPT09XG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJkMzZhNDQwYS05NDQ2LTQwM2MtOWJkMC0xYzcyZDA3ZDNjMTZcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgfSxcbn0pO1xuXG4vLyA9PT0gRE9NIEVsZW1lbnRzID09PVxuLy8gVXNlciBJbmZvXG5jb25zdCBwcm9maWxlTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlSm9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5cbi8vIFByb2ZpbGUgTW9kYWxcbmNvbnN0IHByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnRuXCIpO1xuY29uc3Qgc3VibWl0UHJvZmlsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19zdWJtaXQtYnRuLS1lZGl0LXByb2ZpbGVcIlxuKTtcbmNvbnN0IHByb2ZpbGVGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wiZWRpdC1wcm9maWxlLWZvcm1cIl07XG5jb25zdCBuYW1lSW5wdXQgPSBwcm9maWxlRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpO1xuY29uc3Qgam9iSW5wdXQgPSBwcm9maWxlRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNkZXNjcmlwdGlvblwiKTtcblxuLy8gUHJvZmlsZSBBdmF0YXIgTW9kYWxcbmNvbnN0IHByb2ZpbGVFZGl0SW1hZ2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYXZhdGFyLWJ0blwiKTtcbmNvbnN0IHByb2ZpbGVFZGl0SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZWRpdC1hdmF0YXItbW9kYWxcIlxuKTtcbmNvbnN0IHByb2ZpbGVFZGl0SW1hZ2VGb3JtRWxlbWVudCA9IGRvY3VtZW50LmZvcm1zW1wiZWRpdC1hdmF0YXItZm9ybVwiXTtcbmNvbnN0IHByb2ZpbGVJbWFnZUxpbmtJbnB1dCA9XG4gIHByb2ZpbGVFZGl0SW1hZ2VGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLWxpbmtcIik7XG5jb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcbmNvbnN0IHByb2ZpbGVJbWFnZVN1Ym1pdEJ0biA9IHByb2ZpbGVFZGl0SW1hZ2VGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICBcIi5tb2RhbF9fc3VibWl0LWJ0bi0tZWRpdC1hdmF0YXItcHJvZmlsZVwiXG4pO1xuXG4vLyBOZXcgUG9zdCBNb2RhbFxuY29uc3QgbmV3UG9zdE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNuZXctcG9zdC1tb2RhbFwiKTtcbmNvbnN0IG5ld1Bvc3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idG5cIik7XG5jb25zdCBuZXdQb3N0U3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc3VibWl0LWJ0bi0tbmV3LXBvc3RcIik7XG5jb25zdCBuZXdQb3N0Rm9ybUVsZW1lbnQgPSBkb2N1bWVudC5mb3Jtc1tcIm5ldy1wb3N0LWZvcm1cIl07XG5jb25zdCBpbWFnZUxpbmtJbnB1dCA9IG5ld1Bvc3RGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLWxpbmtcIik7XG5jb25zdCBjYXB0aW9uSW5wdXQgPSBuZXdQb3N0Rm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNwb3N0LWNhcHRpb25cIik7XG5cbi8vIERlbGV0ZSBQb3N0IE1vZGFsXG5jb25zdCBkZWxldGVQb3N0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZS1jYXJkLW1vZGFsXCIpO1xuY29uc3QgZGVsZXRlUG9zdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcmQtZGVsZXRlLWJ0blwiKTtcbmNvbnN0IGNhbmVsRGVsZXRlUG9zdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19jYXJkLWRlbGV0ZS1jYW5jZWwtYnRuXCJcbik7XG5cbi8vIFByZXZpZXcgTW9kYWxcbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdJbWFnZSA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS0tcHJldmlld1wiKTtcbmNvbnN0IHByZXZpZXdDYXB0aW9uID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb24tLXByZXZpZXdcIik7XG5cbi8vIENhcmRzXG5jb25zdCBjYXJkc0xpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xuXG4vLyA9PT0gRmV0Y2ggVXNlciBJbmZvID09PVxuYXBpXG4gIC5nZXRVc2VySW5mbygpXG4gIC50aGVuKChkYXRhKSA9PiB7XG4gICAgcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHByb2ZpbGVKb2JFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICBwcm9maWxlSW1hZ2Uuc3JjID0gZGF0YS5hdmF0YXI7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcblxuLy8gPT09IEZldGNoIGFuZCBSZW5kZXIgQ2FyZHMgPT09XG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChkYXRhKSA9PiBkYXRhLm1hcCgoaXRlbSkgPT4gaXRlbSkpXG4gIC50aGVuKChjYXJkcykgPT4ge1xuICAgIGNhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBnZXRDYXJkRWxlbWVudChjYXJkKTtcbiAgICAgIGNhcmRzTGlzdC5hcHBlbmQobmV3Q2FyZCk7XG4gICAgfSk7XG4gIH0pXG4gIC5jYXRjaChjb25zb2xlLmVycm9yKTtcblxuLy8gPT09IENhcmQgTG9naWMgPT09XG5sZXQgc2VsZWN0ZWRDYXJkO1xubGV0IHNlbGVjdGVkQ2FyZElEO1xuXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZF9fdGVtcGxhdGVcIikuY29udGVudDtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpLmNsb25lTm9kZSh0cnVlKTtcbiAgY29uc3QgY2FyZFRpdGxlID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcbiAgY29uc3QgY2FyZEltYWdlID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgY29uc3QgY2FyZExpa2VCdG4gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnRuXCIpO1xuICBjb25zdCBjYXJkRGVsZXRlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xuXG4gIGNhcmRUaXRsZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcbiAgY2FyZEltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgY2FyZEltYWdlLmFsdCA9IGRhdGEubmFtZTtcblxuICBpZiAoZGF0YS5pc0xpa2VkKSB7XG4gICAgY2FyZExpa2VCdG4uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnRuX2xpa2VkXCIpO1xuICB9XG5cbiAgY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcHJldmlld0ltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgICBwcmV2aWV3SW1hZ2UuYWx0ID0gZGF0YS5uYW1lO1xuICAgIHByZXZpZXdDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICB9KTtcblxuICBjYXJkTGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGhhbmRsZUNhcmRMaWtlVW5saWtlKGNhcmRMaWtlQnRuLCBkYXRhKTtcbiAgfSk7XG5cbiAgY2FyZERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGhhbmRsZURlbGV0ZUNhcmQoY2FyZEVsZW1lbnQsIGRhdGEpO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRMaWtlVW5saWtlKGNhcmRMaWtlQnRuLCBkYXRhKSB7XG4gIHNlbGVjdGVkQ2FyZElEID0gZGF0YS5faWQ7XG4gIGlmICghY2FyZExpa2VCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIikpIHtcbiAgICBhcGlcbiAgICAgIC5hZGRMaWtlKHNlbGVjdGVkQ2FyZElEKVxuICAgICAgLnRoZW4oY2FyZExpa2VCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnRuX2xpa2VkXCIpKVxuICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gIH0gZWxzZSB7XG4gICAgYXBpXG4gICAgICAucmVtb3ZlTGlrZShzZWxlY3RlZENhcmRJRClcbiAgICAgIC50aGVuKGNhcmRMaWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNhcmQoY2FyZEVsZW1lbnQsIGRhdGEpIHtcbiAgc2VsZWN0ZWRDYXJkID0gY2FyZEVsZW1lbnQ7XG4gIHNlbGVjdGVkQ2FyZElEID0gZGF0YS5faWQ7XG4gIG9wZW5Nb2RhbChkZWxldGVQb3N0TW9kYWwpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVEZWxldGVTdWJtaXQoKSB7XG4gIGNvbnN0IG9yaWdpbmFsVGV4dCA9IGRlbGV0ZVBvc3RCdG4udGV4dENvbnRlbnQ7XG4gIGRlbGV0ZVBvc3RCdG4udGV4dENvbnRlbnQgPSBcIkRlbGV0aW5nLi4uXCI7XG4gIGFwaVxuICAgIC5yZW1vdmVDYXJkKHNlbGVjdGVkQ2FyZElEKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHNlbGVjdGVkQ2FyZC5yZW1vdmUoKTtcbiAgICAgIGNsb3NlTW9kYWwoZGVsZXRlUG9zdE1vZGFsKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgZGVsZXRlUG9zdEJ0bi50ZXh0Q29udGVudCA9IG9yaWdpbmFsVGV4dDtcbiAgICB9KTtcbn1cblxuLy8gPT09IEV2ZW50IExpc3RlbmVycyA9PT1cbi8vIE1vZGFsIE9wZW4gRXZlbnRzXG5lZGl0UHJvZmlsZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBvcGVuTW9kYWwocHJvZmlsZU1vZGFsKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gcHJvZmlsZU5hbWVFbGVtZW50LnRleHRDb250ZW50O1xuICBqb2JJbnB1dC52YWx1ZSA9IHByb2ZpbGVKb2JFbGVtZW50LnRleHRDb250ZW50O1xufSk7XG5cbm5ld1Bvc3RCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKG5ld1Bvc3RNb2RhbCk7XG4gIFxufSk7XG5cbnByb2ZpbGVFZGl0SW1hZ2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gIG9wZW5Nb2RhbChwcm9maWxlRWRpdEltYWdlTW9kYWwpXG4pO1xuXG4vLyBNb2RhbCBDbG9zZSBFdmVudHNcbi8vIEN1c3RvbSBEZWxldGUgUG9zdCBCdXR0b25zIEV2ZW50IExpc3RlbmVyc1xuZGVsZXRlUG9zdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRGVsZXRlU3VibWl0KTtcbmNhbmVsRGVsZXRlUG9zdEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gY2xvc2VNb2RhbChkZWxldGVQb3N0TW9kYWwpKTtcblxuLy8gRmluZCBhbGwgY2xvc2UgYnV0dG9uc1xuY29uc3QgY2xvc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuXG5jbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gIC8vIEZpbmQgdGhlIGNsb3Nlc3QgcG9wdXAgb25seSBvbmNlXG4gIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoXCIubW9kYWxcIik7XG4gIC8vIFNldCB0aGUgbGlzdGVuZXJcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZU1vZGFsKHBvcHVwKSk7XG59KTtcblxuLy8gUHJvZmlsZSBGb3JtIFN1Ym1pc3Npb25cbnByb2ZpbGVGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgY29uc3Qgb3JpZ2luYWxUZXh0ID0gc3VibWl0UHJvZmlsZUJ0bi50ZXh0Q29udGVudDtcbiAgc3VibWl0UHJvZmlsZUJ0bi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gIGFwaVxuICAgIC5lZGl0VXNlckluZm8oeyBuYW1lOiBuYW1lSW5wdXQudmFsdWUsIGFib3V0OiBqb2JJbnB1dC52YWx1ZSB9KVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBwcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgICBwcm9maWxlSm9iRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXQ7XG4gICAgICBjbG9zZU1vZGFsKHByb2ZpbGVNb2RhbCk7XG4gICAgICBkaXNhYmxlQnV0dG9uKHN1Ym1pdFByb2ZpbGVCdG4pO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBzdWJtaXRQcm9maWxlQnRuLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0O1xuICAgIH0pO1xufVxuXG4vLyBOZXcgUG9zdCBTdWJtaXNzaW9uXG5uZXdQb3N0Rm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVOZXdQb3N0U3VibWl0KTtcblxuZnVuY3Rpb24gaGFuZGxlTmV3UG9zdFN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIGNvbnN0IG9yaWdpbmFsVGV4dCA9IG5ld1Bvc3RTdWJtaXRCdG4udGV4dENvbnRlbnQ7XG4gIG5ld1Bvc3RTdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuICBhcGlcbiAgICAucG9zdENhcmQoeyBjYXB0aW9uOiBjYXB0aW9uSW5wdXQudmFsdWUsIGxpbms6IGltYWdlTGlua0lucHV0LnZhbHVlIH0pXG4gICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgIGNvbnN0IG5ld0NhcmQgPSBnZXRDYXJkRWxlbWVudChkYXRhKTtcbiAgICAgIGNhcmRzTGlzdC5wcmVwZW5kKG5ld0NhcmQpO1xuICAgICAgY2FwdGlvbklucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgIGltYWdlTGlua0lucHV0LnZhbHVlID0gXCJcIjtcbiAgICAgIGNsb3NlTW9kYWwobmV3UG9zdE1vZGFsKTtcbiAgICAgIGRpc2FibGVCdXR0b24obmV3UG9zdFN1Ym1pdEJ0bik7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5lcnJvcihlcnIpKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIG5ld1Bvc3RTdWJtaXRCdG4udGV4dENvbnRlbnQgPSBvcmlnaW5hbFRleHQ7XG4gICAgfSk7XG59XG5cbi8vIFByb2ZpbGUgQXZhdGFyIFN1Ym1pc3Npb25cbnByb2ZpbGVFZGl0SW1hZ2VGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICBcInN1Ym1pdFwiLFxuICBoYW5kbGVOZXdQcm9maWxlSW1hZ2VTdWJtaXRcbik7XG5cbmZ1bmN0aW9uIGhhbmRsZU5ld1Byb2ZpbGVJbWFnZVN1Ym1pdChldnQpIHtcbiAgY29uc29sZS5sb2coXCJTdWJtaXRcIik7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBsaW5rID0gcHJvZmlsZUltYWdlTGlua0lucHV0LnZhbHVlO1xuICBjb25zdCBvcmlnaW5hbFRleHQgPSBwcm9maWxlSW1hZ2VTdWJtaXRCdG4udGV4dENvbnRlbnQ7XG4gIHByb2ZpbGVJbWFnZVN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG4gIGFwaVxuICAgIC5lZGl0UHJvZmlsZUF2YXRhcihsaW5rKVxuICAgIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgICAgcHJvZmlsZUltYWdlLnNyYyA9IHVzZXJEYXRhLmF2YXRhcjtcbiAgICAgIGNsb3NlTW9kYWwocHJvZmlsZUVkaXRJbWFnZU1vZGFsKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmVycm9yKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcHJvZmlsZUltYWdlU3VibWl0QnRuLnRleHRDb250ZW50ID0gb3JpZ2luYWxUZXh0O1xuICAgIH0pO1xufVxuXG4vLyBNb2RhbCBIZWxwZXJzXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlKTtcbn1cbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlKTtcbn1cblxuLy8gQ2xvc2UgTW9kYWxzIG9uIE92ZXJsYXkgQ2xpY2tcbmNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxcIik7XG5tb2RhbHMuZm9yRWFjaCgobW9kYWwpID0+IHtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGlmIChldmVudC50YXJnZXQgPT09IG1vZGFsKSB7XG4gICAgICBjbG9zZU1vZGFsKG1vZGFsKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbi8vIENsb3NlIE1vZGFsIG9uIEVTQ1xuZnVuY3Rpb24gaGFuZGxlRXNjYXBlKGV2dCkge1xuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGNvbnN0IG9wZW5lZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XG4gICAgaWYgKG9wZW5lZE1vZGFsKSB7XG4gICAgICBjbG9zZU1vZGFsKG9wZW5lZE1vZGFsKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gPT09IEluaXRpYWxpemUgVmFsaWRhdGlvbiA9PT1cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJidXR0b25FbGVtZW50IiwiaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwic29tZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3JjIiwicGVuY2lsU3JjIiwid2hpdGVQZW5jaWxTcmMiLCJwbHVzU3JjIiwibG9nb1NyYyIsImFwaSIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInRoaXMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfY2hlY2tSZXNwb25zZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJfcmVxdWVzdCIsInVybCIsImZldGNoIiwidGhlbiIsImVkaXRVc2VySW5mbyIsIl9yZWYiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImdldFVzZXJJbmZvIiwiZWRpdFByb2ZpbGVBdmF0YXIiLCJhdmF0YXIiLCJnZXRJbml0aWFsQ2FyZHMiLCJwb3N0Q2FyZCIsIl9yZWYyIiwiY2FwdGlvbiIsImxpbmsiLCJyZW1vdmVDYXJkIiwiY2FyZElkIiwiYWRkTGlrZSIsInJlbW92ZUxpa2UiLCJhdXRob3JpemF0aW9uIiwicHJvZmlsZU5hbWVFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInByb2ZpbGVKb2JFbGVtZW50IiwicHJvZmlsZU1vZGFsIiwiZWRpdFByb2ZpbGVCdG4iLCJzdWJtaXRQcm9maWxlQnRuIiwicHJvZmlsZUZvcm1FbGVtZW50IiwiZm9ybXMiLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsInByb2ZpbGVFZGl0SW1hZ2VCdG4iLCJwcm9maWxlRWRpdEltYWdlTW9kYWwiLCJwcm9maWxlRWRpdEltYWdlRm9ybUVsZW1lbnQiLCJwcm9maWxlSW1hZ2VMaW5rSW5wdXQiLCJwcm9maWxlSW1hZ2UiLCJwcm9maWxlSW1hZ2VTdWJtaXRCdG4iLCJuZXdQb3N0TW9kYWwiLCJuZXdQb3N0QnRuIiwibmV3UG9zdFN1Ym1pdEJ0biIsIm5ld1Bvc3RGb3JtRWxlbWVudCIsImltYWdlTGlua0lucHV0IiwiY2FwdGlvbklucHV0IiwiZGVsZXRlUG9zdE1vZGFsIiwiZGVsZXRlUG9zdEJ0biIsImNhbmVsRGVsZXRlUG9zdEJ0biIsInByZXZpZXdNb2RhbCIsInByZXZpZXdJbWFnZSIsInByZXZpZXdDYXB0aW9uIiwiY2FyZHNMaXN0Iiwic2VsZWN0ZWRDYXJkIiwic2VsZWN0ZWRDYXJkSUQiLCJnZXRDYXJkRWxlbWVudCIsImRhdGEiLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkVGl0bGUiLCJjYXJkSW1hZ2UiLCJjYXJkTGlrZUJ0biIsImNhcmREZWxldGVCdG4iLCJ0ZXh0Q29udGVudCIsImFsdCIsImlzTGlrZWQiLCJhZGRFdmVudExpc3RlbmVyIiwib3Blbk1vZGFsIiwiX2lkIiwiY29udGFpbnMiLCJ0b2dnbGUiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImhhbmRsZUNhcmRMaWtlVW5saWtlIiwiaGFuZGxlRGVsZXRlQ2FyZCIsIm1vZGFsIiwiaGFuZGxlRXNjYXBlIiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJvcGVuZWRNb2RhbCIsIm1hcCIsIml0ZW0iLCJjYXJkcyIsImZvckVhY2giLCJjYXJkIiwibmV3Q2FyZCIsImFwcGVuZCIsInZhbHVlIiwib3JpZ2luYWxUZXh0IiwiZmluYWxseSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJidXR0b24iLCJwb3B1cCIsImNsb3Nlc3QiLCJwcmV2ZW50RGVmYXVsdCIsInByZXBlbmQiLCJsb2ciLCJ1c2VyRGF0YSIsImV2ZW50IiwidGFyZ2V0IiwiQXJyYXkiLCJmcm9tIiwiZm9ybUVsZW1lbnQiLCJzZXRFdmVudExpc3RlbmVycyIsImNoZWNrSW5wdXRWYWxpZGl0eSIsImhpZGVJbnB1dEVycm9yIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIiwiZW5hYmxlVmFsaWRhdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=